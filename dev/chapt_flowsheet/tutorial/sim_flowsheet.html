

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Creating a Flowsheet with Linked Simulations &mdash; FOQUS</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/foqus.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/theme_and_schema.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Flowsheets with Recycle" href="recycle.html" />
    <link rel="prev" title="Creating a Flowsheet" href="simple_flowsheet.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> FOQUS
          

          
            
            <img src="../../_static/big_ccsi.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../chapt_intro/index.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Flowsheets and Settings</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#contents">Contents</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../reference/index.html">Reference</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Tutorial</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="files.html">Example Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="simple_flowsheet.html">Creating a Flowsheet</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Creating a Flowsheet with Linked Simulations</a></li>
<li class="toctree-l4"><a class="reference internal" href="recycle.html">Flowsheets with Recycle</a></li>
<li class="toctree-l4"><a class="reference internal" href="data.html">Flowsheet Result Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="remote.html">Using a Remote Turbine Instance</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../chapt_opt/index.html">Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chapt_uq/index.html">Uncertainty Quantification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chapt_ouu/index.html">Optimization Under Uncertainty</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chapt_surrogates/index.html">Surrogate Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chapt_sdoe/index.html">Sequential Design of Experiments (SDOE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chapt_solventfit/index.html">Solvent Fit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chapt_sinter/index.html">Simulation Standard Interface (SimSinter)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chapt_heat/index.html">Heat Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chapt_debug/index.html">Debugging</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">FOQUS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Flowsheets and Settings</a> &raquo;</li>
        
          <li><a href="index.html">Tutorial</a> &raquo;</li>
        
      <li>Creating a Flowsheet with Linked Simulations</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/chapt_flowsheet/tutorial/sim_flowsheet.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="creating-a-flowsheet-with-linked-simulations">
<span id="tutorial-sim-flowsheet"></span><h1>Creating a Flowsheet with Linked Simulations<a class="headerlink" href="#creating-a-flowsheet-with-linked-simulations" title="Permalink to this headline">¶</a></h1>
<p>This tutorial is referenced by other tutorials. <strong>Save the flowsheet in
a convenient location for future use.</strong></p>
<p>This tutorial demonstrates how to link simulations to nodes, and how to
connect nodes in a flowsheet. Two models are used: (1) a bubbling
fluidized bed model in ACM and (2) a cost of electricity (COE) model in
Excel. The COE model estimates the cost of electricity for a 650 MW (net
before adding capture) supercritical pulverized coal power plant with
solid sorbent post combustion CO<span class="math notranslate nohighlight">\(_2\)</span> capture process added.</p>
<p>Before starting the tutorial, see Section
<a class="reference external" href="#tutorial.example.files">[tutorial.example.files]</a> to locate and
copy the example files to a convenient location.</p>
<ol class="arabic simple">
<li>Start FOQUS. The Session window displays (Figure
<a class="reference external" href="#fig.tut.opt.session">[fig.tut.opt.session]</a>).</li>
<li>Enter “BFB_opt” in <strong>Session Name</strong> (without quotes).</li>
<li>Click the <strong>Description</strong> tab. The problem description box displays
and is shown in (Figure
<a class="reference external" href="#fig.tut.opt.description">[fig.tut.opt.description]</a>).</li>
<li>In the problem description box enter information about the problem
being solved in the FOQUS session; this information can be more
extensive than what is shown in the example.</li>
<li>Save the session file. Click <strong>Save Session</strong> from the <strong>Session</strong>
drop-down menu. Enter change log information and a file name when
prompted. The <strong>Creation Time</strong> in metadata page will be the time the
session is first saved. The <strong>Modification Time</strong> will be the last
time the session was saved. The <strong>ID</strong> is a unique identifier that
changes each time the user saves the simulation. The <strong>Change Log</strong>
tab provides a record of the changes made each time the session is
saved.</li>
</ol>
<div class="figure" id="fig-tut-opt-session">
<img alt="Session Setup" src="../../_images/session.svg" /><p class="caption"><span class="caption-text">Session Setup</span></p>
</div>
<div class="figure" id="fig-tut-opt-description">
<img alt="Session Description" src="../../_images/description.svg" /><p class="caption"><span class="caption-text">Session Description</span></p>
</div>
<p>[subsec.opt.tutorial.flowsheet] There are two models needed for this
optimization problem: (1) the ACM model for the BFB capture system and
(2) the Excel cost estimating spreadsheet. These models are provided in
the example files directory, under optimization/models (see Section
<a class="reference external" href="#tutorial.example.files">[tutorial.example.files]</a>). There are two
SimSinter configuration files: (1) BFB_sinter_config_v6.2.json for the
process model and (2) BFB_cost_v6.2.3.json for the cost model. The next
step is to upload the models to Turbine.</p>
<ol class="arabic" start="6">
<li><p class="first">Open the <strong>AddUpdate Model to Turbine</strong> dialog box (Figure
<a class="reference external" href="#fig.tut.opt.menu.upload">[fig.tut.opt.menu.upload]</a>).</p>
</li>
<li><p class="first">In this case, the SimSinter configuration files have already been
created. If a SimSinter configuration file needs to be created for
the simulation, <strong>Create/Edit</strong> displays the SimSinter configuration
GUI (see Figure <a class="reference external" href="#fig.tut.opt.upload">[fig.tut.opt.upload]</a>). See
the SimSinter documentation or Chapter
<a class="reference external" href="#chapt.simsinter">[chapt.simsinter]</a> for more information.</p>
</li>
<li><p class="first">Click <strong>Browse</strong> to select a SimSinter configuration file (Figure
<a class="reference external" href="#fig.tut.opt.upload">[fig.tut.opt.upload]</a>). Once the SimSinter
configuration file is selected, the simulation file and sinterconfig
file is automatically added to the files to upload. The application
type is entered automatically. If there are additional files
required for the simulation, those files can be added by clicking
<strong>Add File</strong>.</p>
</li>
<li><p class="first">Enter the simulation name in <strong>Simulation Name</strong>. This name is
determined by the user, but will default to the SimSinter
configuration file name. For this tutorial use BFB_v6_2.</p>
</li>
<li><p class="first">Click OK to upload the simulation.</p>
</li>
<li><div class="first line-block">
<div class="line">Repeat the upload process for the cost model. Name the model</div>
<div class="line">BFB_v6_2_Cost.</div>
</div>
</li>
</ol>
<div class="figure" id="fig-tut-opt-menu-upload">
<img alt="Open Upload to Turbine Dialog" src="../../_images/menu_upload.svg" /><p class="caption"><span class="caption-text">Open Upload to Turbine Dialog</span></p>
</div>
<div class="figure" id="fig-tut-opt-upload">
<img alt="Upload to Turbine Dialog" src="../../_images/upload.svg" /><p class="caption"><span class="caption-text">Upload to Turbine Dialog</span></p>
</div>
<p>The next step is to create the flowsheet. Figure
<a class="reference external" href="#fig.tut.opt.drawFlowsheet">[fig.tut.opt.drawFlowsheet]</a> illustrates
the steps to draw the flowsheet.</p>
<ol class="arabic simple" start="12">
<li>Click <strong>Flowsheet</strong> at the top of the Home window.</li>
<li>Click <strong>Add Node mode</strong>.</li>
<li>Add two nodes to the flowsheet. Name the first node “BFB” and the
second node “cost”.</li>
<li>Click <strong>Add Edge mode</strong>.</li>
<li>Click the BFB node followed by the cost node.</li>
<li>Click <strong>Selection mode</strong> and select the BFB node.</li>
<li>Click <strong>Toggle Node Editor</strong>. The Node Editor displays as
illustrated in Figure
<a class="reference external" href="#fig.tut.opt.nodeEditor">[fig.tut.opt.nodeEditor]</a>.</li>
</ol>
<div class="figure" id="fig-tut-opt-drawflowsheet">
<img alt="Flowsheet Editor" src="../../_images/flowsheetDraw.svg" /><p class="caption"><span class="caption-text">Flowsheet Editor</span></p>
</div>
<p>Each node must be assigned the appropriate simulation. Use the Node
Editor to set the simulation type and the simulation name from
simulation uploaded to Turbine. The Node Editor is illustrated in Figure
<a class="reference external" href="#fig.tut.opt.nodeEditor">[fig.tut.opt.nodeEditor]</a></p>
<ol class="arabic simple" start="19">
<li>Under <strong>Model</strong> and <strong>Type</strong>, set the simulation <strong>Type</strong> to
Turbine. This indicates that the simulation is to be run with
Turbine.</li>
<li>Under <strong>Model</strong>, set the simulation of the BFB node to BFB_v6_2.</li>
<li>The <strong>Variables</strong> and <strong>Settings</strong> are automatically populated from
the SimSinter configuration file. Variable values, <strong>Min/Max</strong>, and
descriptions can be changed; however, for this problem, the values
taken from the SimSinter configuration should not be changed.</li>
<li>Repeat the process for the cost node, assigning it the BFB_v6_2_cost
simulation.</li>
</ol>
<div class="figure" id="fig-tut-opt-nodeeditor">
<img alt="Node Editor" src="../../_images/nodeEditor.svg" /><p class="caption"><span class="caption-text">Node Editor</span></p>
</div>
<p>The connections between variables in the BFB simulation and the cost
estimation spreadsheet must be set, so that required information can be
transferred from the BFB simulation to the cost simulation.</p>
<ol class="arabic simple" start="23">
<li>Click <strong>Toggle Node Editor</strong> to hide the Node Editor (Figure
<a class="reference external" href="#fig.tut.opt.drawFlowsheet">[fig.tut.opt.drawFlowsheet]</a>).</li>
<li>Select the edge on the flowsheet with the <strong>Selection</strong> tool.</li>
<li>Click <strong>Toggle Edge Editor</strong> to show the Edge Editor. The Edge
Editor is shown in Figure
<a class="reference external" href="#fig.tut.opt.edgeEditor">[fig.tut.opt.edgeEditor]</a>.</li>
<li>For convenience, all of the variables that should be connected from
the ACM model to the Excel spreadsheet have been given the same
names in their SimSinter configuration files. To connect the
variables click <strong>Auto</strong> in the Edge Editor. <strong>Auto</strong> connects
variables of the same name. Since this is often not desired, the
<strong>Auto</strong> button should be used carefully. There should be 46
connected variables.</li>
</ol>
<div class="figure" id="fig-tut-opt-edgeeditor">
<img alt="Edge Editor" src="../../_images/edgeEditor.svg" /><p class="caption"><span class="caption-text">Edge Editor</span></p>
</div>
<p>The flowsheet should now be ready to run. Test the flowsheet by
executing a single evaluation before setting up the optimization
problem.</p>
<ol class="arabic simple" start="27">
<li>Click <strong>Run</strong> in the Flowsheet Editor (Figure
<a class="reference external" href="#fig.tut.opt.drawFlowsheet">[fig.tut.opt.drawFlowsheet]</a>).</li>
<li>The flowsheet may take a few minutes to run. The BFB simulation
takes a significant amount of time to open in ACM. While running
optimization, the evaluations take less time because the simulation
remains opened. The simulation should complete successfully. A
message box displays when the simulation is done. The status bar
also indicates the simulation is running.</li>
<li>While the simulation is running, <strong>Stop</strong> is enabled.</li>
<li>Once the simulation runs successfully, <strong>Save</strong> the FOQUS session
again, and <strong>keep it for use in later tutorials</strong>.</li>
</ol>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="recycle.html" class="btn btn-neutral float-right" title="Flowsheets with Recycle" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="simple_flowsheet.html" class="btn btn-neutral float-left" title="Creating a Flowsheet" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright copyright (c) 2012 - 2018 by CCSI Team All rights reserved.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>