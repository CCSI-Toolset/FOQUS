{"CCSIFileMetaData":{"ID":"fd17f6fc1ed64b39bf8dd2f259aa4aa8","CreationTime":"2020-06-11T16:31:53","ModificationTime":"2020-06-11T16:31:53","ChangeLog":{"2020-06-11T16:31:53":["00.00","fd17f6fc1ed64b39bf8dd2f259aa4aa8","FOQUS_IDAES",""]},"DisplayName":"FOQUS_IDAES","OriginalFilename":"FOQUS_IDAES.json","Application":"foqus","Description":"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0//EN\" \"http://www.w3.org/TR/REC-html40/strict.dtd\">\n<html><head><meta name=\"qrichtext\" content=\"1\" /><style type=\"text/css\">\np, li { white-space: pre-wrap; }\n</style></head><body style=\" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;\">\n<p style=\" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;\">None</p></body></html>","MIMEType":"application/ccsi+foqus","Confidence":"experimental","Parents":[],"Role":"Input","UpdateMetadata":true,"Version":"00.00"},"Type":"FOQUS_Session","ID":"FOQUS_IDAES_Example_200611163153","flowsheet":{"errorStat":100,"includeStatusOutput":true,"nodes":{"Flowsheet":{"modelType":0,"modelName":"","x":-200.0,"y":-200.0,"z":0.0,"scriptMode":"post","pythonCode":"import sys\n\n# Import objects from pyomo package \nfrom pyomo.environ import ConcreteModel, SolverFactory,TransformationFactory, value\n\nimport pyutilib.subprocess.GlobalData\npyutilib.subprocess.GlobalData.DEFINE_SIGNAL_HANDLERS_DEFAULT = False\n\n# Import the main FlowsheetBlock from IDAES. The flowsheet block will contain the unit model\n\nimport idaes\nfrom idaes.core.flowsheet_model import FlowsheetBlock\n\n# Import the BTX_ideal property package to create a properties block for the flowsheet\nfrom idaes.generic_models.properties.activity_coeff_models import BTX_activity_coeff_VLE\n\n# Import heater unit model from the model library\nfrom idaes.generic_models.unit_models.heater import Heater\n\n# Import flash unit model from the model library\nfrom idaes.generic_models.unit_models.flash import Flash\n\n# Import methods for unit model connection and flowsheet initialization\nfrom pyomo.network import Arc, SequentialDecomposition\n\n# Import idaes logger to set output levels\nimport idaes.logger as idaeslog\n\n# Create the ConcreteModel and the FlowsheetBlock, and attach the flowsheet block to it.\nm = ConcreteModel()\n\nm.fs = FlowsheetBlock(default={\"dynamic\": False}) # dynamic or ss flowsheet needs to be specified here\n\n# Add properties parameter block to the flowsheet with specifications\nm.fs.properties = BTX_activity_coeff_VLE.BTXParameterBlock(default={\"valid_phase\":\n                                                     ('Liq', 'Vap'),\n                                                     \"activity_coeff_model\":\n                                                     \"Ideal\"})\n\n# Create an instance of the heater unit, attaching it to the flowsheet\n# Specify that the property package to be used with the heater is the one we created earlier.\nm.fs.heater = Heater(default={\"property_package\": m.fs.properties})\n\nm.fs.flash = Flash(default={\"property_package\": m.fs.properties})\n\n# Connect heater and flash models using an arc\nm.fs.heater_flash_arc = Arc(source=m.fs.heater.outlet, destination=m.fs.flash.inlet)\n\nTransformationFactory(\"network.expand_arcs\").apply_to(m)\n\n#Feed Specifications to heater\nm.fs.heater.inlet.flow_mol.fix(x[\"heater_inlet_molflow\"])\nm.fs.heater.inlet.mole_frac_comp[0, \"benzene\"].fix(x[\"heater_inlet_benzene_molfrac\"])\nm.fs.heater.inlet.mole_frac_comp[0, \"toluene\"].fix(x[\"heater_inlet_toluene_molfrac\"])\nm.fs.heater.inlet.pressure.fix(x[\"heater_inlet_pressure\"]) # Pa\nm.fs.heater.inlet.temperature.fix(x[\"heater_inlet_temperature\"]) # K\n\n# Unit model specifications\nm.fs.heater.outlet.temperature.fix(x[\"heater_outlet_temperature\"])\nm.fs.flash.heat_duty.fix(x[\"flash_heat_duty\"])\nm.fs.flash.deltaP.fix(x[\"flash_pressure_drop\"])\n\n#Flowsheet Initialization\ndef function(unit):\n        unit.initialize(outlvl=1)\n\nopt = SolverFactory('ipopt')\nseq = SequentialDecomposition()\nseq.options.select_tear_method = \"heuristic\"\nseq.run(m, function)\n\n# Solve the flowsheet using ipopt\nopt = SolverFactory('ipopt')\nsolve_status = opt.solve(m)\n\n#Assign IDAES model output values to FOQUS output values\nf[\"flash_liq_molflow\"] = value(m.fs.flash.liq_outlet.flow_mol[0])\nf[\"flash_liq_benzene_molfrac\"] = value(m.fs.flash.liq_outlet.mole_frac_comp[0,\"benzene\"])\nf[\"flash_liq_toluene_molfrac\"] = value(m.fs.flash.liq_outlet.mole_frac_comp[0,\"toluene\"])\nf[\"flash_liq_temperature\"] = value(m.fs.flash.liq_outlet.temperature[0])\nf[\"flash_liq_pressure\"] = value(m.fs.flash.liq_outlet.pressure[0])\nf[\"flash_vap_molflow\"] = value(m.fs.flash.vap_outlet.flow_mol[0])\nf[\"flash_vap_benzene_molfrac\"] = value(m.fs.flash.vap_outlet.mole_frac_comp[0,\"benzene\"])\nf[\"flash_vap_toluene_molfrac\"] = value(m.fs.flash.vap_outlet.mole_frac_comp[0,\"toluene\"])\nf[\"flash_vap_temperature\"] = value(m.fs.flash.vap_outlet.temperature[0])\nf[\"flash_vap_pressure\"] = value(m.fs.flash.vap_outlet.pressure[0])\nf[\"heater_heat_duty\"] = value(m.fs.heater.heat_duty[0])\n","calcError":0,"options":{"order":[],"options":{}},"turbApp":null,"turbSession":null,"synced":true}},"edges":[],"input":{"graph":{},"Flowsheet":{"heater_inlet_molflow":{"dtype":"float","value":0.277778,"min":0.0,"max":0.0,"default":0.0,"unit":"mol/s","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"heater_inlet_pressure":{"dtype":"float","value":101325.0,"min":0.0,"max":0.0,"default":0.0,"unit":"Pa","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"heater_inlet_temperature":{"dtype":"float","value":353.0,"min":0.0,"max":0.0,"default":0.0,"unit":"K","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"heater_inlet_benzene_molfrac":{"dtype":"float","value":0.4,"min":0.0,"max":0.0,"default":0.0,"unit":"","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"heater_inlet_toluene_molfrac":{"dtype":"float","value":0.6,"min":0.0,"max":0.0,"default":0.0,"unit":"","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"heater_outlet_temperature":{"dtype":"float","value":370.0,"min":0.0,"max":0.0,"default":0.0,"unit":"K","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_heat_duty":{"dtype":"float","value":0.0,"min":0.0,"max":0.0,"default":0.0,"unit":"W","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_pressure_drop":{"dtype":"float","value":0.0,"min":0.0,"max":0.0,"default":0.0,"unit":"Pa","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}}}},"output":{"graph":{"error":{"dtype":"float","value":100.0,"min":0.0,"max":0.0,"default":0.0,"unit":"","set":"user","desc":"Flowsheet error code","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}}},"Flowsheet":{"heater_heat_duty":{"dtype":"float","value":2813.4712843971965,"min":0.0,"max":0.0,"default":0.0,"unit":"W","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_liq_molflow":{"dtype":"float","value":0.21456379817443308,"min":0.0,"max":0.0,"default":0.0,"unit":"mol/s","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_liq_pressure":{"dtype":"float","value":101325.0,"min":0.0,"max":0.0,"default":0.0,"unit":"Pa","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_liq_temperature":{"dtype":"float","value":370.0,"min":0.0,"max":0.0,"default":0.0,"unit":"K","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_liq_benzene_molfrac":{"dtype":"float","value":0.3501023283038552,"min":0.0,"max":0.0,"default":0.0,"unit":"","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_liq_toluene_molfrac":{"dtype":"float","value":0.6498976716961447,"min":0.0,"max":0.0,"default":0.0,"unit":"","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_vap_molflow":{"dtype":"float","value":0.06321420182556699,"min":0.0,"max":0.0,"default":0.0,"unit":"mol/s","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_vap_pressure":{"dtype":"float","value":101325.0,"min":0.0,"max":0.0,"default":0.0,"unit":"Pa","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_vap_temperature":{"dtype":"float","value":370.0,"min":0.0,"max":0.0,"default":0.0,"unit":"K","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_vap_toluene_molfrac":{"dtype":"float","value":0.43063562221779716,"min":0.0,"max":0.0,"default":0.0,"unit":"","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_vap_benzene_molfrac":{"dtype":"float","value":0.5693643777822027,"min":0.0,"max":0.0,"default":0.0,"unit":"","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}}}},"tearSolver":"Wegstein","tearMaxIt":40,"tearTol":0.001,"tearTolType":"abs","tearLog":false,"tearLogStub":"tear_log","tearBound":false,"wegAccMax":9.0,"wegAccMin":-9.0,"singleCount":0,"onlySingleNode":null,"simList":{},"pre_solve_nodes":[],"post_solve_nodes":[],"no_solve_nodes":[],"turbineSim":null,"results":{"__columns":["set","result","time","solution_time","err","input.Flowsheet.heater_inlet_molflow","input.Flowsheet.heater_inlet_pressure","input.Flowsheet.heater_inlet_temperature","input.Flowsheet.heater_inlet_benzene_molfrac","input.Flowsheet.heater_inlet_toluene_molfrac","input.Flowsheet.heater_outlet_temperature","input.Flowsheet.flash_heat_duty","input.Flowsheet.flash_pressure_drop","output.graph.error","output.Flowsheet.heater_heat_duty","output.Flowsheet.flash_liq_molflow","output.Flowsheet.flash_liq_pressure","output.Flowsheet.flash_liq_temperature","output.Flowsheet.flash_liq_benzene_molfrac","output.Flowsheet.flash_liq_toluene_molfrac","output.Flowsheet.flash_vap_molflow","output.Flowsheet.flash_vap_pressure","output.Flowsheet.flash_vap_temperature","output.Flowsheet.flash_vap_toluene_molfrac","output.Flowsheet.flash_vap_benzene_molfrac","node_err.Flowsheet","turb.Flowsheet"],"__indexes":[0],"__filters":{"none":{"filterTerm":null,"sortTerm":null,"no_results":true},"all":{"filterTerm":null,"sortTerm":null,"no_results":false}},"__current_filter":null,"0":["Single_runs","single_0","2020-06-11T20:25:10.495391",30.624598264694214,100.0,0.277778,101325.0,353.0,0.4,0.6,370.0,0.0,0.0,100.0,2813.4712843971965,0.21456379817443308,101325.0,370.0,0.3501023283038552,0.6498976716961447,0.06321420182556699,101325.0,370.0,0.43063562221779716,0.5693643777822027,0.0,""],"calculated_columns":{}}},"optProblem":{"obj":[],"g":[],"objtype":0,"custpy":"","v":[],"vs":[],"samp":{},"solver":null,"solverOptions":{}},"surrogateProblem":{"ACOSSO":{"input":[],"output":[],"inputOptions":{},"outputOptions":{},"options":{"Data Filter":"all","Use Flowsheet Data":"Yes","Input Data File":"acosso\\xdat.csv","Output Data File":"acosso\\ydat.csv","Model File":"acosso_fit.rds","FOQUS Model (for UQ)":"acosso_surrogate_uq.py","FOQUS Model (for Flowsheet)":"acosso_surrogate_fs.py","CV":"bic","Order":2}}},"surrogateCurrent":"ACOSSO","uqSimList":[],"uqFilterResultsList":[],"sdoeSimList":[],"sdoeFilterResultsList":[]}